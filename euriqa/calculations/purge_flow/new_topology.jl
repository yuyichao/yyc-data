#!/usr/bin/julia

include("utils.jl")

const out_resistance = 2.0

const l1 = Leaf(2 + out_resistance)
const l2 = Leaf(8 + out_resistance)
const l3 = Leaf(3.5 + out_resistance)
const l4 = Leaf(6 + out_resistance)
const l5 = Leaf(2.5 + out_resistance)
const l6 = Leaf(4 + out_resistance)
const l7 = Leaf(10 + out_resistance)
const l8 = Leaf(5 + out_resistance)
const l9 = Leaf(8 + out_resistance)
const l10 = Leaf(2.5 + out_resistance)
const l11 = Leaf(9 + out_resistance)
const l12 = Leaf(2 + out_resistance)
const l13 = Leaf(8 + out_resistance)
const l14 = Leaf(5 + out_resistance)
const l15 = Leaf(6 + out_resistance)
const l16 = Leaf(2.5 + out_resistance)
const l17 = Leaf(4 + out_resistance)

const b1 = Branch(l1, l2, 1)
const b2 = Branch(l3, l4, 1)
const b3 = Branch(b1, b2, 6.5)
const b4 = Branch(b3, l5, 1)
const b5 = Branch(b4, l6, 18)
const b6 = Branch(b5, l7, 37)
const b7 = Branch(l8, l9, 2)
const b8 = Branch(l10, l11, 4.5)
const b9 = Branch(b7, b8, 4)
const b10 = Branch(l12, l13, 13.5)
const b11 = Branch(b9, b10, 6)
const b12 = Branch(l14, l15, 5)
const b13 = Branch(l16, l17, 4)
const b14 = Branch(b12, b13, 22)
const b15 = Branch(b11, b14, 45)
const b16 = Branch(b6, b15, 0)

const root = b16

update_resistance!(root)
update_flow!(root, 1)

# println(root.resistance)

println("L1: $(l1.flow * 100) %")
println("L2: $(l2.flow * 100) %")
println("L3: $(l3.flow * 100) %")
println("L4: $(l4.flow * 100) %")
println("Global 1: $(b3.flow * 100) %")
println("L5: $(l5.flow * 100) %")
println("L6: $(l6.flow * 100) %")
println("Global 2: $((l5.flow + l6.flow) * 100) %")
println("L7: $(l7.flow * 100) %")
println("L8: $(l8.flow * 100) %")
println("L9: $(l9.flow * 100) %")
println("L10: $(l10.flow * 100) %")
println("L11: $(l11.flow * 100) %")
println("Noise Eater: $(b9.flow * 100) %")
println("L12: $(l12.flow * 100) %")
println("L13: $(l13.flow * 100) %")
println("Ind 1: $(b10.flow * 100) %")
println("L14: $(l14.flow * 100) %")
println("L15: $(l15.flow * 100) %")
println("Ind 2: $(b12.flow * 100) %")
println("L16: $(l16.flow * 100) %")
println("L17: $(l17.flow * 100) %")
println("Ind 3: $(b13.flow * 100) %")

println("B1: $(b1.flow * 100) %")
println("B2: $(b2.flow * 100) %")
println("B3: $(b3.flow * 100) %")
println("B4: $(b4.flow * 100) %")
println("B5: $(b5.flow * 100) %")
println("B6: $(b6.flow * 100) %")
println("B7: $(b7.flow * 100) %")
println("B8: $(b8.flow * 100) %")
println("B9: $(b9.flow * 100) %")
println("B10: $(b10.flow * 100) %")
println("B11: $(b11.flow * 100) %")
println("B12: $(b12.flow * 100) %")
println("B13: $(b13.flow * 100) %")
println("B14: $(b14.flow * 100) %")
println("B15: $(b15.flow * 100) %")
println("B16: $(b16.flow * 100) %")

# println("$(l1.flow * 100)")
# println("$(l2.flow * 100)")
# println("$(l3.flow * 100)")
# println("$(l4.flow * 100)")
# println("$(l5.flow * 100)")
# println("$(l6.flow * 100)")
# println("$(l7.flow * 100)")
# println("$(l8.flow * 100)")
# println("$(l9.flow * 100)")
# println("$(l10.flow * 100)")
# println("$(l11.flow * 100)")
# println("$(l12.flow * 100)")
# println("$(l13.flow * 100)")
# println("$(l14.flow * 100)")
# println("$(l15.flow * 100)")
# println("$(l16.flow * 100)")
# println("$(l17.flow * 100)")
